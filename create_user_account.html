<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Create User Account - Hostelio</title>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:url('images/bg.jpeg') no-repeat center center fixed; background-size:cover; color:white; display:flex; flex-direction:column; min-height:100vh; }
  header { display:flex; justify-content:space-between; align-items:center; padding:15px 30px; background:rgba(0,0,0,0.8); }
  .title { font-size:24px; font-weight:bold; }
  .nav-links a { color:white; text-decoration:none; margin-left:20px; font-size:16px; }
  .nav-links a:hover { color:#ffd700; }
  .container { flex:1; display:flex; justify-content:center; align-items:center; background:rgba(0,0,0,0.6); padding:40px 20px; }
  .content { width:100%; max-width:450px; background:rgba(0,0,0,0.7); padding:30px; border-radius:10px; text-align:center; }
  h1 { color:#ffd700; margin-bottom:20px; }
  input[type=text], input[type=email], input[type=tel], input[type=password] { width:90%; padding:12px; margin:10px 0; border:none; border-radius:6px; font-size:16px; }
  button { width:95%; padding:14px; margin-top:15px; font-size:18px; color:white; background-color:#28a745; border:none; border-radius:8px; cursor:pointer; transition:background-color 0.3s; }
  button:hover { background-color:#218838; }
  footer { text-align:center; padding:10px 0; background:rgba(0,0,0,0.8); font-size:14px; }
  .logo {
      width: 70px; height: 70px;
      border-radius: 50%; object-fit: cover;
    }
    .create-account a {
    color: #ffd700; text-decoration: none;
  }
  .create-account a:hover { text-decoration: underline; }
</style>
</head>
<body>

<header>
    <div class="left-section">
    <img src="images/ic.png" alt="Logo" class="logo">
  </div>
   <div class="title"><h2>Hostelio</h2></div>
      <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="about.html">About Us</a>
      <a href="contact.html">Contact Us</a>
    </div>
  </header>

<div class="container">
  <div class="content">
    <h1>Create User Account</h1>
    <form id="userRegisterForm">
      <input type="text" name="fullname" placeholder="Full Name" required />
      <input type="email" name="email" placeholder="Email Address" required />
      <input type="tel" name="phone" placeholder="Phone Number" pattern="[0-9]{10}" title="Enter 10 digit phone number" required />
      <input type="text" name="location" placeholder="Location" required />
      <input type="password" name="password" placeholder="Password" required />
      <button type="submit">Create Account</button>
    </form>
  </div><div class="create-account">
      <p>Don't have an account? <a href="create_user_account.html">Create User Account</a></p>
    </div>

</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

  // üî• Replace with your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCLn45hIR-S75BEPypx1BFgOV8vA5MaqU0",
    authDomain: "hostelio-89130.firebaseapp.com",
    projectId: "hostelio-89130",
    storageBucket: "hostelio-89130.appspot.com",
    messagingSenderId: "530522106867",
    appId: "1:530522106867:web:227d355ea3fcc63317c086",
    measurementId: "G-CYM1EHN5G5"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const form = document.getElementById("userRegisterForm");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const fullname = e.target.fullname.value;
    const email = e.target.email.value;
    const phone = e.target.phone.value;
    const location = e.target.location.value;
    const password = e.target.password.value;

    try {
      // 1Ô∏è‚É£ Create user in Firebase Auth
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);
      const user = userCredential.user;

      // 2Ô∏è‚É£ Store additional info in Firestore
      await addDoc(collection(db, "users"), {
        uid: user.uid,
        fullname,
        email,
        phone,
        location,
        createdAt: new Date()
      });

      // 3Ô∏è‚É£ Auto-login (already logged in by default)
      localStorage.setItem("user", JSON.stringify({ uid: user.uid, email: user.email, fullname }));

      // 4Ô∏è‚É£ Redirect to dashboard
      alert("‚úÖ Account created successfully!");
      window.location.href = "user_dashboard.html";

    } catch (error) {
      console.error(error);
      alert("Error: " + error.message);
    }
  });
</script>

<footer>
  &copy; 2025 Hostelio. All rights reserved.
</footer>

</body>
</html>
